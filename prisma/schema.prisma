generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model ContactSubmission {
  id        Int      @id @default(autoincrement())
  name      String   @db.VarChar(191)
  email     String   @db.VarChar(191)
  phone     String   @db.VarChar(191)
  purpose   String   @db.VarChar(191)
  message   String   @db.VarChar(191)
  status    String   @default("new") @db.VarChar(191)
  createdAt DateTime @default(dbgenerated("CURRENT_TIMESTAMP(3)"))
  updatedAt DateTime @updatedAt
}

model B2BSubmission {
  id        Int      @id @default(autoincrement())
  name      String   @db.VarChar(191)
  company   String   @db.VarChar(191)
  email     String   @db.VarChar(191)
  phone     String   @db.VarChar(191)
  country   String   @db.VarChar(191)
  message   String   @db.VarChar(191)
  status    String   @default("new") @db.VarChar(191)
  createdAt DateTime @default(dbgenerated("CURRENT_TIMESTAMP(3)"))
  updatedAt DateTime @updatedAt
}

model StudyPage {
  id             Int        @id @default(autoincrement())
  title          String     @db.VarChar(191)
  slug           String     @unique @db.VarChar(191)
  description    String     @db.VarChar(191)
  bannerUrl      String?    @db.VarChar(191)
  seoTitle       String?    @db.VarChar(191)
  seoDescription String?    @db.VarChar(191)
  isActive       Boolean    @default(true)
  createdAt      DateTime   @default(dbgenerated("CURRENT_TIMESTAMP(3)"))
  updatedAt      DateTime   @updatedAt
  categories     Category[]
}

model Category {
  id          Int       @id @default(autoincrement())
  title       String    @db.VarChar(191)
  description String?   @db.VarChar(191)
  studyPageId Int
  createdAt   DateTime  @default(dbgenerated("CURRENT_TIMESTAMP(3)"))
  updatedAt   DateTime  @updatedAt
  cards       Card[]
  studyPage   StudyPage @relation(fields: [studyPageId], references: [id], onDelete: Cascade)

  @@unique([studyPageId, title])
}

model Card {
  id           Int         @id @default(autoincrement())
  title        String      @db.VarChar(191)
  description  Json
  imageUrl     String?     @db.VarChar(191)
  cardCategory String?     @db.VarChar(191)
  duration     String?     @db.VarChar(191)
  location     String?     @db.VarChar(191)
  intake       String?     @db.VarChar(191)
  requirements String?     @db.VarChar(191)
  categoryId   Int
  createdAt    DateTime    @default(dbgenerated("CURRENT_TIMESTAMP(3)"))
  updatedAt    DateTime    @updatedAt
  isActive     Boolean     @default(true)
  link         String?     @db.VarChar(191)
  Active       Boolean?    @default(true)
  category     Category    @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  blocks       CardBlock[]
  details      DetailPage?
}

model CardBlock {
  id     Int     @id @default(autoincrement())
  title  String  @db.VarChar(191)
  value  String  @db.VarChar(191)
  icon   String? @db.VarChar(191)
  cardId Int
  card   Card    @relation(fields: [cardId], references: [id], onDelete: Cascade)
}

model DetailPage {
  id        Int            @id @default(autoincrement())
  content   String         @db.VarChar(191)
  cardId    Int            @unique
  createdAt DateTime       @default(dbgenerated("CURRENT_TIMESTAMP(3)"))
  updatedAt DateTime       @updatedAt
  card      Card           @relation(fields: [cardId], references: [id], onDelete: Cascade)
  tables    DynamicTable[]
}

model DynamicTable {
  id           Int        @id @default(autoincrement())
  title        String     @db.VarChar(191)
  description  String?    @db.VarChar(191)
  detailPageId Int
  columns      Json
  rows         Json
  iconUrl      String?    @db.VarChar(191)
  createdAt    DateTime   @default(dbgenerated("CURRENT_TIMESTAMP(3)"))
  updatedAt    DateTime   @updatedAt
  detailPage   DetailPage @relation(fields: [detailPageId], references: [id], onDelete: Cascade)
}

model LuckyDrawEntry {
  id        Int      @id @default(autoincrement())
  name      String   @db.VarChar(191)
  email     String   @unique @db.VarChar(191)
  phone     String   @db.VarChar(191)
  country   String   @db.VarChar(191)
  reason    String   @db.VarChar(191)
  isWinner  Boolean  @default(false)
  createdAt DateTime @default(dbgenerated("CURRENT_TIMESTAMP(3)"))
}

model Admin {
  id        String   @id @default(cuid()) @db.VarChar(191)
  email     String   @unique @db.VarChar(191)
  name      String   @db.VarChar(191)
  password  String   @db.VarChar(191)
  role      String   @default("admin") @db.VarChar(191)
  createdAt DateTime @default(dbgenerated("CURRENT_TIMESTAMP(3)"))
  updatedAt DateTime @updatedAt
}

model SiteSettings {
  id              Int      @id @default(autoincrement())
  siteName        String   @default("Study Abroad with Hadi") @db.VarChar(191)
  siteUrl         String   @default("https://studyabroadwithhadi.info") @db.VarChar(191)
  logoUrl         String?  @db.VarChar(191)
  faviconUrl      String?  @db.VarChar(191)
  contactEmail    String   @db.VarChar(191)
  contactPhone    String   @db.VarChar(191)
  address         String?  @db.VarChar(191)
  aboutContent    String?  @db.VarChar(191)
  metaTitle       String?  @db.VarChar(191)
  metaDescription String?  @db.VarChar(191)
  primaryColor    String   @default("#3b82f6") @db.VarChar(191)
  secondaryColor  String   @default("#6366f1") @db.VarChar(191)
  accentColor     String   @default("#f59e0b") @db.VarChar(191)
  adminName       String   @default("Hadi") @db.VarChar(191)
  adminEmail      String   @default("admin@studyabroadwithhadi.info") @db.VarChar(191)
  adminPhone      String   @default("+1-234-567-8900") @db.VarChar(191)
  adminTitle      String   @default("Expert Visa Consultant") @db.VarChar(191)
  adminBio        String?  @db.VarChar(191)
  isActive        Boolean  @default(true)
  createdAt       DateTime @default(dbgenerated("CURRENT_TIMESTAMP(3)"))
  updatedAt       DateTime @updatedAt
}

model Testimonial {
  id         Int      @id @default(autoincrement())
  name       String   @db.VarChar(191)
  country    String   @db.VarChar(191)
  university String   @db.VarChar(191)
  course     String   @db.VarChar(191)
  content    String   @db.VarChar(191)
  rating     Int      @default(5)
  imageUrl   String?  @db.VarChar(191)
  isFeatured Boolean  @default(false)
  isActive   Boolean  @default(true)
  createdAt  DateTime @default(dbgenerated("CURRENT_TIMESTAMP(3)"))
  updatedAt  DateTime @updatedAt
}

model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique @db.VarChar(191)
  name      String   @db.VarChar(191)
  password  String   @db.VarChar(191)
  role      String   @default("USER") @db.VarChar(191)
  isActive  Boolean  @default(true)
  createdAt DateTime @default(dbgenerated("CURRENT_TIMESTAMP(3)"))
  updatedAt DateTime @updatedAt
}

model Inquiry {
  id             Int      @id @default(autoincrement())
  name           String   @db.VarChar(191)
  email          String   @db.VarChar(191)
  phone          String   @db.VarChar(191)
  country        String   @db.VarChar(191)
  preferredStudy String   @db.VarChar(191)
  message        String   @db.VarChar(191)
  status         String   @default("PENDING") @db.VarChar(191)
  createdAt      DateTime @default(dbgenerated("CURRENT_TIMESTAMP(3)"))
  updatedAt      DateTime @updatedAt
}

model TeamMember {
  id          Int      @id @default(autoincrement())
  name        String   @db.VarChar(191)
  role        String   @db.VarChar(191)
  bio         String?  @db.VarChar(191)
  imageUrl    String?  @db.VarChar(191)
  email       String?  @db.VarChar(191)
  phone       String?  @db.VarChar(191)
  linkedinUrl String?  @db.VarChar(191)
  isActive    Boolean  @default(true)
  order       Int      @default(0)
  createdAt   DateTime @default(dbgenerated("CURRENT_TIMESTAMP(3)"))
  updatedAt   DateTime @updatedAt
}
